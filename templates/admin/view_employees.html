{% extends 'base.html' %}
{% load static %}

{% block title %}Dashboard | Employees{% endblock title %}
{% block stylesheet %}
    
    .table-shadow{
        background: white;
        padding: 2%;
        -webkit-box-shadow: 0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.12), 0 1px 5px 0 rgba(	0,0,0,0.2);
        box-shadow: 0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.12), 0 1px 5px 0 rgba(0,0,0,0.2);
    }
    .count-object {
        position: absolute;
        top: 31%;
        right: 12px;
        font-size: 25px;
        font-weight: 100;
        font-variant: petite-caps;
        color: #f5f5f5;
        text-shadow:1px 1px rgba(8, 8, 8, 0.23);
    }
    .sec-box{
        <!-- width:200px; --><!-- enabled -> removes box responsiveness : avoid this -->
        height:80px;
        max-width:100%;
        line-height:80px;
        text-align:center;
        position:relative;
        
        font-size:1.9rem;
   
       -webkit-box-shadow: 0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.12), 0 1px 5px 0 rgba(0,0,0,0.2);
       box-shadow: 0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.12), 0 1px 5px 0 rgba(0,0,0,0.2);
       transition: all 400ms ease-in;
   
       font-variant: petite-caps;
   }
   
    .sec-box a{
        color:#fff;
        text-decoration:none;
           
    }
       
       
    .employee-box{
        background:#26969a;
    }

    .blocked-box{
        background:#8664ad;
   }

    #stylebutton{
        background: #60a0b3 !important;
        color: #fff !important;
        font-variant: petite-caps !important;
        font-size: 12px !important;
        margin-right: 1px;
        padding: 10px 22px;
    }

    .input-group-btn + input:focus{
        outline:#60a0b3;
    }
{% endblock stylesheet %}
   
    

{% block content %}
    <section class="row">
        <section class="col col-lg-12">
            <a href="{{request.META.HTTP_REFERER|escape}}" style="color:#0d6efd;">back</a>
        </section>
    </section>
    <section class="row margin-bottom">
        <div class="container-fluid">
            <section class="col-lg-4 col-md-4 col-sm-12">
                <div class="employee-box sec-box">
                    <a href="">
                    <span>Employees</span>
                    </a>
                    <span class="count-object">{{ all_employees.count }}</span> 
                </div>
            </section>
        
            <section class="col-lg-4 col-md-4 col-sm-12">
                <div class="blocked-box sec-box">
                    <a href="">
                    <span>Blocked Users</span>
                    </a>
                    <span class="count-object">{{ blocked_employees.count }}</span> 
                </div>
            </section>
        </div>
    </section>

    <div class="row" style="margin-bottom: 2.2rem;margin-top: 3rem;">
        <div class="">
        <div class="col-lg-12">

            <form action="." method="GET">
                <div class="input-group mb3">
                    <span class="input-group-btn">
                        <button class="btn btn-default" id = "stylebutton" type="submit">Search</button>
                    </span>
                    <input type="search" value="{{request.GET.search}}" name="search" class="form-control" placeholder="Search by first name,last name...">
                </div><!-- /input-group -->
            </form>

        </div><!-- /.col-lg-6 -->
        </div>
    </div><!-- /.row -->

    <!-- TABLE -->
    <div class="table-responsive table-shadow">
        <div class="text-center table-description">
            <h4 class="title-h3" style="color: #60a0b3 !important;
            text-shadow: 1px 0px rgba(0,0,0,0.11)"> EMPLOYEES TABLE</h4>
        </div>
        <div class="container-fluid">
            <div class="row">
                 <div class="download-print-action">
                      Download Excel | Pdf | Print <!-- Work on pdf and excel and print -->
                      
                </div>
            </div>
        </div>
        <table class="table">
            <thead>
                <tr>
                  <th scope="col"></th>
                  <th scope="col">Full Name</th>
                  <th scope="col">Status</th>
                  <th scope="col">Actions</th>
                </tr>
            </thead>
            <tbody>
                {% if not employee_list %}
                    <tr>
                    <td>No Employee found.</td>
                    </tr>
                {% else %}
                    {% for employee in employee_list %}
                    <tr>

                    {% if employee.image %}
                    <th scope="row"><img src="{{employee.image.url}}" width="50" height="50"></th>
                    {% else %}
                    <th scope="row">-</th>
                    {% endif %}

                    <td>{{ employee.get_full_name }}</td>
                    

                    {% if employee.is_blocked %}
                    <td>Inactive</td>
                    {% else %}
                    <td>active</td>
                    {% endif %}

                    <td> 
                        <a href="{% url 'admin_app:info' employee.user_id %}">
                            view
                        </a>                     
                        
                    </td>
                    </tr>
                    {% endfor %}
                {% endif %}
            </tbody>

        </table>
        <!-- Pagination -->
              <div class="pagination">
                <span class="step-links">
                    {% if employee_list.has_previous %}
                        <a href="?page=1">&laquo; first</a>
                        <a href="?page={{ employee_list.previous_page_number }}">previous</a>
                    {% endif %}

                    <span class="current">
                        Page {{ employee_list.number }} of {{ employee_list.paginator.num_pages }}.
                    </span>

                    {% if employee_list.has_next %}
                        <a href="?page={{ employee_list.next_page_number }}">next</a>
                        <a href="?page={{ employee_list.paginator.num_pages }}">last &raquo;</a>
                    {% endif %}
                </span>
            </div>
        <!-- /pagination -->


    </div>
    <!-- /TABLE -->
    
{% endblock content %}

